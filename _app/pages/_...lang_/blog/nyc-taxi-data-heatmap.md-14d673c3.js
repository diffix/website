import{S as Yt,i as St,s as $t,C as ft,w as Bt,x as Mt,y as Jt,z as Kt,A as Ht,q as Rt,o as Ot,B as Ut,a0 as jt,e as l,t as o,k as u,c as f,a as n,h as r,d as t,m as p,b as m,Q as nt,g as i,P as s}from"../../../chunks/vendor-cf06609c.js";import{P as Wt}from"../../../chunks/_post-015bc996.js";import"../../../chunks/utils-68f461b3.js";import"../../../chunks/Trans-d72ba112.js";function Vt(j){let d,w,y,c,h,v,G,z,Te,Ee,D,ke,Pe,X,b,Fe,T,Ne,Ce,ee,x,qe,E,Ae,Ie,te,k,P,He,je,ae,Y,Ge,ie,S,Ye,se,$,Se,oe,F,ht,re,B,$e,le,M,Be,fe,J,Me,ne,_,Je,N,Ke,Re,he,K,Oe,de,R,Ue,ue,C,dt,pe,O,We,me,q,ut,ce,U,Ve,ve,W,Qe,we,V,Ze,ye,A,Z,Le,Xe,be,I,L,et,tt,xe,g,at,Q,it,st;return{c(){d=l("h1"),w=o("Side-by-side comparison of Diffix Fir and original data using the NYC taxi data"),y=u(),c=l("p"),h=l("a"),v=o("Piotr Dobaczewski"),G=o(" wrote a "),z=l("a"),Te=o("nice little visualization"),Ee=o(" that compares the accuracy of Diffix anonymization with the original data. The visualization uses the NYC taxi data; a pseudonymized dataset of every taxi ride in NYC that is released each year. The "),D=l("a"),ke=o("code is on GitHub"),Pe=o(". The version of Diffix used for the visualization is Fir."),X=u(),b=l("p"),Fe=o("The data we used covers 14776615 rides registered during January 2013 and comes from a publication by the "),T=l("a"),Ne=o("University of Illinois at Urbana-Champaign"),Ce=o("."),ee=u(),x=l("p"),qe=o("Each row of the dataset describes a single ride; its pickup and dropoff time and location, the fare, the number of passengers and other details. The dataset includes a column that uniquely identifies the driver of each ride. Because it is pseudonymized, the dataset would be regarded as personal data by GDPR criteria. There "),E=l("a"),Ae=o("have been claims"),Ie=o(" that driver privacy could be at risk from this data, and indeed NYC no longer includes a driver identification in its releases. This is unfortunate, because it is no longer possible to analyze driver statistics, such as driver work habits, length of employment, and so on. This data could safely be analyzed with Diffix."),te=u(),k=l("p"),P=l("a"),He=o("The visualization"),je=o(" gives data for two parameters, average ride fare and average ride speed. Many other parameters could be queried \u2026 these are just the two examples we chose. The data is shown as a grid heatmap. The size of the grid boxes depends on the zoom level, but can get down to the size of a small city block. Each heatmap covers a 1-hour time window at 4-hour intervals."),ae=u(),Y=l("p"),Ge=o("The visualization comes with a slider that you can wipe across the heatmap. The heatmap to the left of the slider is without anonymization, and the heatmap to the right is anonymized by Diffix Fir. This lets you directly see how much Diffix distorts the results."),ie=u(),S=l("h2"),Ye=o("How we make the boxes"),se=u(),$=l("p"),Se=o("Here is a portion of the heatmap from lower Manhattan for average fares, rounded to the nearest dollar, in the 8:00 - 9:00 time window:"),oe=u(),F=l("img"),re=u(),B=l("p"),$e=o("Not all locations are covered by boxes, and some boxes are larger than others."),le=u(),M=l("p"),Be=o("The reason that not all locations have boxes is because there were not enough rides in the given time/space window to generate a meaningful average. In the case of the original (non-anonymized) data, we require that there be five or more rides originating in the time/space window. If not, we suppress the data and publish nothing. Diffix naturally suppresses data for which there are too few drivers as part of its anonymization. The average suppression threshold for Diffix Fir was set to five distinct drivers."),fe=u(),J=l("p"),Me=o("The reason some boxes are bigger than others is that we show the smallest box for which all of the four sub-boxes at the next zoom level are suppressed. (Box dimensions grow as a power of two, so each box can be divided into four smaller boxes. If all four smaller boxes would be suppressed, then we show the larger box.)"),ne=u(),_=l("p"),Je=o("As you explore the visualization, you will notice that sometimes the original data displays a box where Diffix Fir does not, and vice versa. This is because the suppression threshold for Diffix Fir is not a specific value, but a range of values from three to roughly seven. ("),N=l("a"),Ke=o("Read more"),Re=o(" about noisy thresholds.) Sometimes Diffix Fir will display a box with only three or four distinct rides, or suppress a box with six or seven distinct rides. By contrast, the threshold for the original data is always five."),he=u(),K=l("h2"),Oe=o("A simple example"),de=u(),R=l("p"),Ue=o("Imagine that you are flying to NYC via JFK airport, and you are wondering how flying in during rush hour will affect your taxi fare. Comparing 8am versus 8pm for both average trip speed and fare for rides out of JFK, we see that while trip speed is substantially slower during rush hour (as expected), the fares change only slightly."),ue=u(),C=l("img"),pe=u(),O=l("p"),We=o("Now let\u2019s compare the Diffix heatmap above with the original heatmap."),me=u(),q=l("img"),ce=u(),U=l("p"),Ve=o("While there are slight differences, both the Diffix and original heatmaps convey the same basic insights."),ve=u(),W=l("h2"),Qe=o("Key takeaways"),we=u(),V=l("p"),Ze=o("The key takeaways from this visualization are:"),ye=u(),A=l("p"),Z=l("strong"),Le=o("Diffix is pretty accurate."),Xe=o(" Visually you can see that the Diffix heatmap tracks the original data heatmap pretty closely. One can draw valid conclusions from the anonymized data."),be=u(),I=l("p"),L=l("strong"),et=o("Diffix hides some data."),tt=o(" Any anonymization mechanism must either suppress or generalize data, and Diffix is no exception. We could certainly have shown the original data as exact points in time. Doing so, however, would in fact detract from the quality of the visualization. Heatmaps are good for visualization precisely because nearby values are cumulated. Given this, the fact that Diffix hides data hardly detracts from the quality of the visualization at all."),xe=u(),g=l("p"),at=o("Please feel free to contact us at "),Q=l("a"),it=o("hello@open-diffix.org"),st=o(" if you have any questions, or would like to explore the use of Diffix for your own project!"),this.h()},l(e){d=f(e,"H1",{});var a=n(d);w=r(a,"Side-by-side comparison of Diffix Fir and original data using the NYC taxi data"),a.forEach(t),y=p(e),c=f(e,"P",{});var H=n(c);h=f(H,"A",{href:!0,rel:!0});var pt=n(h);v=r(pt,"Piotr Dobaczewski"),pt.forEach(t),G=r(H," wrote a "),z=f(H,"A",{href:!0,rel:!0});var mt=n(z);Te=r(mt,"nice little visualization"),mt.forEach(t),Ee=r(H," that compares the accuracy of Diffix anonymization with the original data. The visualization uses the NYC taxi data; a pseudonymized dataset of every taxi ride in NYC that is released each year. The "),D=f(H,"A",{href:!0,rel:!0});var ct=n(D);ke=r(ct,"code is on GitHub"),ct.forEach(t),Pe=r(H,". The version of Diffix used for the visualization is Fir."),H.forEach(t),X=p(e),b=f(e,"P",{});var _e=n(b);Fe=r(_e,"The data we used covers 14776615 rides registered during January 2013 and comes from a publication by the "),T=f(_e,"A",{href:!0,rel:!0});var vt=n(T);Ne=r(vt,"University of Illinois at Urbana-Champaign"),vt.forEach(t),Ce=r(_e,"."),_e.forEach(t),ee=p(e),x=f(e,"P",{});var ge=n(x);qe=r(ge,"Each row of the dataset describes a single ride; its pickup and dropoff time and location, the fare, the number of passengers and other details. The dataset includes a column that uniquely identifies the driver of each ride. Because it is pseudonymized, the dataset would be regarded as personal data by GDPR criteria. There "),E=f(ge,"A",{href:!0,rel:!0});var wt=n(E);Ae=r(wt,"have been claims"),wt.forEach(t),Ie=r(ge," that driver privacy could be at risk from this data, and indeed NYC no longer includes a driver identification in its releases. This is unfortunate, because it is no longer possible to analyze driver statistics, such as driver work habits, length of employment, and so on. This data could safely be analyzed with Diffix."),ge.forEach(t),te=p(e),k=f(e,"P",{});var ot=n(k);P=f(ot,"A",{href:!0,rel:!0});var yt=n(P);He=r(yt,"The visualization"),yt.forEach(t),je=r(ot," gives data for two parameters, average ride fare and average ride speed. Many other parameters could be queried \u2026 these are just the two examples we chose. The data is shown as a grid heatmap. The size of the grid boxes depends on the zoom level, but can get down to the size of a small city block. Each heatmap covers a 1-hour time window at 4-hour intervals."),ot.forEach(t),ae=p(e),Y=f(e,"P",{});var bt=n(Y);Ge=r(bt,"The visualization comes with a slider that you can wipe across the heatmap. The heatmap to the left of the slider is without anonymization, and the heatmap to the right is anonymized by Diffix Fir. This lets you directly see how much Diffix distorts the results."),bt.forEach(t),ie=p(e),S=f(e,"H2",{});var xt=n(S);Ye=r(xt,"How we make the boxes"),xt.forEach(t),se=p(e),$=f(e,"P",{});var _t=n($);Se=r(_t,"Here is a portion of the heatmap from lower Manhattan for average fares, rounded to the nearest dollar, in the 8:00 - 9:00 time window:"),_t.forEach(t),oe=p(e),F=f(e,"IMG",{src:!0,width:!0}),re=p(e),B=f(e,"P",{});var gt=n(B);$e=r(gt,"Not all locations are covered by boxes, and some boxes are larger than others."),gt.forEach(t),le=p(e),M=f(e,"P",{});var zt=n(M);Be=r(zt,"The reason that not all locations have boxes is because there were not enough rides in the given time/space window to generate a meaningful average. In the case of the original (non-anonymized) data, we require that there be five or more rides originating in the time/space window. If not, we suppress the data and publish nothing. Diffix naturally suppresses data for which there are too few drivers as part of its anonymization. The average suppression threshold for Diffix Fir was set to five distinct drivers."),zt.forEach(t),fe=p(e),J=f(e,"P",{});var Dt=n(J);Me=r(Dt,"The reason some boxes are bigger than others is that we show the smallest box for which all of the four sub-boxes at the next zoom level are suppressed. (Box dimensions grow as a power of two, so each box can be divided into four smaller boxes. If all four smaller boxes would be suppressed, then we show the larger box.)"),Dt.forEach(t),ne=p(e),_=f(e,"P",{});var ze=n(_);Je=r(ze,"As you explore the visualization, you will notice that sometimes the original data displays a box where Diffix Fir does not, and vice versa. This is because the suppression threshold for Diffix Fir is not a specific value, but a range of values from three to roughly seven. ("),N=f(ze,"A",{href:!0,rel:!0});var Tt=n(N);Ke=r(Tt,"Read more"),Tt.forEach(t),Re=r(ze," about noisy thresholds.) Sometimes Diffix Fir will display a box with only three or four distinct rides, or suppress a box with six or seven distinct rides. By contrast, the threshold for the original data is always five."),ze.forEach(t),he=p(e),K=f(e,"H2",{});var Et=n(K);Oe=r(Et,"A simple example"),Et.forEach(t),de=p(e),R=f(e,"P",{});var kt=n(R);Ue=r(kt,"Imagine that you are flying to NYC via JFK airport, and you are wondering how flying in during rush hour will affect your taxi fare. Comparing 8am versus 8pm for both average trip speed and fare for rides out of JFK, we see that while trip speed is substantially slower during rush hour (as expected), the fares change only slightly."),kt.forEach(t),ue=p(e),C=f(e,"IMG",{src:!0,width:!0}),pe=p(e),O=f(e,"P",{});var Pt=n(O);We=r(Pt,"Now let\u2019s compare the Diffix heatmap above with the original heatmap."),Pt.forEach(t),me=p(e),q=f(e,"IMG",{src:!0,width:!0}),ce=p(e),U=f(e,"P",{});var Ft=n(U);Ve=r(Ft,"While there are slight differences, both the Diffix and original heatmaps convey the same basic insights."),Ft.forEach(t),ve=p(e),W=f(e,"H2",{});var Nt=n(W);Qe=r(Nt,"Key takeaways"),Nt.forEach(t),we=p(e),V=f(e,"P",{});var Ct=n(V);Ze=r(Ct,"The key takeaways from this visualization are:"),Ct.forEach(t),ye=p(e),A=f(e,"P",{});var rt=n(A);Z=f(rt,"STRONG",{});var qt=n(Z);Le=r(qt,"Diffix is pretty accurate."),qt.forEach(t),Xe=r(rt," Visually you can see that the Diffix heatmap tracks the original data heatmap pretty closely. One can draw valid conclusions from the anonymized data."),rt.forEach(t),be=p(e),I=f(e,"P",{});var lt=n(I);L=f(lt,"STRONG",{});var At=n(L);et=r(At,"Diffix hides some data."),At.forEach(t),tt=r(lt," Any anonymization mechanism must either suppress or generalize data, and Diffix is no exception. We could certainly have shown the original data as exact points in time. Doing so, however, would in fact detract from the quality of the visualization. Heatmaps are good for visualization precisely because nearby values are cumulated. Given this, the fact that Diffix hides data hardly detracts from the quality of the visualization at all."),lt.forEach(t),xe=p(e),g=f(e,"P",{});var De=n(g);at=r(De,"Please feel free to contact us at "),Q=f(De,"A",{href:!0});var It=n(Q);it=r(It,"hello@open-diffix.org"),It.forEach(t),st=r(De," if you have any questions, or would like to explore the use of Diffix for your own project!"),De.forEach(t),this.h()},h(){m(h,"href","https://github.com/pdobacz"),m(h,"rel","nofollow"),m(z,"href","https://taxi-heatmap.open-diffix.org/"),m(z,"rel","nofollow"),m(D,"href","https://github.com/diffix/taxi-heatmap"),m(D,"rel","nofollow"),m(T,"href","https://databank.illinois.edu/datasets/IDB-9610843"),m(T,"rel","nofollow"),m(E,"href","https://vgc.engineering.nyu.edu/~juliana/pub/taxi-privacy.pdf"),m(E,"rel","nofollow"),m(P,"href","https://taxi-heatmap.open-diffix.org/"),m(P,"rel","nofollow"),nt(F.src,ht="/blog/figs/heatmap-ex.gif")||m(F,"src",ht),m(F,"width","600"),m(N,"href","https://www.open-diffix.org/blog/diffix-elm-automates-what-statistics-offices-have-been-doing-for-decades"),m(N,"rel","nofollow"),nt(C.src,dt="/blog/figs/speed-fare-diffix.png")||m(C,"src",dt),m(C,"width","600"),nt(q.src,ut="/blog/figs/speed-fare-raw.png")||m(q,"src",ut),m(q,"width","600"),m(Q,"href","mailto:hello@open-diffix.org")},m(e,a){i(e,d,a),s(d,w),i(e,y,a),i(e,c,a),s(c,h),s(h,v),s(c,G),s(c,z),s(z,Te),s(c,Ee),s(c,D),s(D,ke),s(c,Pe),i(e,X,a),i(e,b,a),s(b,Fe),s(b,T),s(T,Ne),s(b,Ce),i(e,ee,a),i(e,x,a),s(x,qe),s(x,E),s(E,Ae),s(x,Ie),i(e,te,a),i(e,k,a),s(k,P),s(P,He),s(k,je),i(e,ae,a),i(e,Y,a),s(Y,Ge),i(e,ie,a),i(e,S,a),s(S,Ye),i(e,se,a),i(e,$,a),s($,Se),i(e,oe,a),i(e,F,a),i(e,re,a),i(e,B,a),s(B,$e),i(e,le,a),i(e,M,a),s(M,Be),i(e,fe,a),i(e,J,a),s(J,Me),i(e,ne,a),i(e,_,a),s(_,Je),s(_,N),s(N,Ke),s(_,Re),i(e,he,a),i(e,K,a),s(K,Oe),i(e,de,a),i(e,R,a),s(R,Ue),i(e,ue,a),i(e,C,a),i(e,pe,a),i(e,O,a),s(O,We),i(e,me,a),i(e,q,a),i(e,ce,a),i(e,U,a),s(U,Ve),i(e,ve,a),i(e,W,a),s(W,Qe),i(e,we,a),i(e,V,a),s(V,Ze),i(e,ye,a),i(e,A,a),s(A,Z),s(Z,Le),s(A,Xe),i(e,be,a),i(e,I,a),s(I,L),s(L,et),s(I,tt),i(e,xe,a),i(e,g,a),s(g,at),s(g,Q),s(Q,it),s(g,st)},d(e){e&&t(d),e&&t(y),e&&t(c),e&&t(X),e&&t(b),e&&t(ee),e&&t(x),e&&t(te),e&&t(k),e&&t(ae),e&&t(Y),e&&t(ie),e&&t(S),e&&t(se),e&&t($),e&&t(oe),e&&t(F),e&&t(re),e&&t(B),e&&t(le),e&&t(M),e&&t(fe),e&&t(J),e&&t(ne),e&&t(_),e&&t(he),e&&t(K),e&&t(de),e&&t(R),e&&t(ue),e&&t(C),e&&t(pe),e&&t(O),e&&t(me),e&&t(q),e&&t(ce),e&&t(U),e&&t(ve),e&&t(W),e&&t(we),e&&t(V),e&&t(ye),e&&t(A),e&&t(be),e&&t(I),e&&t(xe),e&&t(g)}}}function Qt(j){let d,w;const y=[j[0],Gt];let c={$$slots:{default:[Vt]},$$scope:{ctx:j}};for(let h=0;h<y.length;h+=1)c=ft(c,y[h]);return d=new Wt({props:c}),{c(){Bt(d.$$.fragment)},l(h){Mt(d.$$.fragment,h)},m(h,v){Jt(d,h,v),w=!0},p(h,[v]){const G=v&1?Kt(y,[v&1&&Ht(h[0]),v&0&&Ht(Gt)]):{};v&2&&(G.$$scope={dirty:v,ctx:h}),d.$set(G)},i(h){w||(Rt(d.$$.fragment,h),w=!0)},o(h){Ot(d.$$.fragment,h),w=!1},d(h){Ut(d,h)}}}const Gt={title:"Side-by-side comparison of Diffix Fir and original data using the NYC taxi data",author:"Paul Francis",date:"2022-07-12T00:00:00.000Z",excerpt:"This heatmap visualization shows just how accurate Diffix anonymization can be, even down to the city block."};function Zt(j,d,w){return j.$$set=y=>{w(0,d=ft(ft({},d),jt(y)))},d=jt(d),[d]}class aa extends Yt{constructor(d){super();St(this,d,Zt,Qt,$t,{})}}export{aa as default,Gt as metadata};
